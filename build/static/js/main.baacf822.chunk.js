(this.webpackJsonptfe_front=this.webpackJsonptfe_front||[]).push([[1],{100:function(e,t,n){},101:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),s=n(28),a=n.n(s),i=n(14),o=n(1),j=n(60),l=n(4),u=n.n(l),d=n(5),b=n(6),h=(n(81),n(62)),O=n.n(h),p=localStorage.getItem("token"),x=O.a.create({baseURL:"https://api.timmy.dnet.ovh",timeout:3e3,headers:{common:{Authorization:p?"Bearer ".concat(p):null}}});function f(e){return m.apply(this,arguments)}function m(){return(m=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.defaults.headers.common.Authorization="Bearer ".concat(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete x.defaults.headers.common.Authorization;case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=n(0),k=function(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),a=Object(b.a)(s,2),j=a[0],l=a[1],h=Object(i.e)(),O=Object(o.L)(),p=Object(b.a)(O,1)[0];function m(){return(m=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.post("/users/login",{username:n,password:j});case 3:(t=e.sent)&&(f(t.data.token),console.log("connected"),localStorage.setItem("token",t.data.token),h.push("/home")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),p({message:"Incorrect username or password",buttons:["ok"]});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsx)(o.B,{children:Object(y.jsx)(o.A,{children:"Login"})})}),Object(y.jsxs)(o.k,{fullscreen:!0,children:[Object(y.jsx)(o.r,{children:"Connexion"}),Object(y.jsx)(o.q,{children:Object(y.jsx)(o.p,{value:n,placeholder:"Username",onIonChange:function(e){return r(e.detail.value)}})}),Object(y.jsx)(o.q,{children:Object(y.jsx)(o.p,{value:j,type:"password",placeholder:"Password",onIonChange:function(e){return l(e.detail.value)}})}),Object(y.jsx)(o.c,{onClick:function(){return m.apply(this,arguments)},children:"Connect"}),Object(y.jsx)(o.c,{class:"createaccountbutton",routerLink:"/register",children:"register"}),Object(y.jsx)(o.c,{routerLink:"/recover",children:"Recover Password ?"})]})]})},w=(n(100),function(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),a=Object(b.a)(s,2),j=a[0],l=a[1],h=Object(c.useState)(),O=Object(b.a)(h,2),p=O[0],f=O[1],m=Object(c.useState)(),v=Object(b.a)(m,2),g=v[0],k=v[1],w=Object(c.useState)(),C=Object(b.a)(w,2),L=C[0],S=C[1],_=Object(i.e)(),B=Object(o.L)(),A=Object(b.a)(B,1)[0];function I(){return(I=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.post("/users/create",{username:n,password:j,mail:p,first_name:g,last_name:L});case 3:e.sent&&_.push("/"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),400===e.t0.response.status&&A({message:"There is one field missing",buttons:["ok"]}),401===e.t0.response.status&&A({message:"Username already used",buttons:["ok"]}),402===e.t0.response.status&&A({message:"Mail already used",buttons:["ok"]});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsx)(o.B,{children:Object(y.jsx)(o.A,{children:"Register"})})}),Object(y.jsxs)(o.k,{fullscreen:!0,children:[Object(y.jsx)(o.r,{children:"Create account ( * are mendatory )"}),Object(y.jsx)(o.q,{children:Object(y.jsx)(o.p,{value:n,placeholder:"Username (*)",onIonChange:function(e){return r(e.detail.value)}})}),Object(y.jsx)(o.q,{children:Object(y.jsx)(o.p,{value:j,placeholder:"Password (*)",type:"password",onIonChange:function(e){return l(e.detail.value)}})}),Object(y.jsx)(o.q,{children:Object(y.jsx)(o.p,{value:p,placeholder:"E-Mail (*)",onIonChange:function(e){return f(e.detail.value)}})}),Object(y.jsx)(o.q,{children:Object(y.jsx)(o.p,{value:g,placeholder:"First Name",onIonChange:function(e){return k(e.detail.value)}})}),Object(y.jsx)(o.q,{children:Object(y.jsx)(o.p,{value:L,placeholder:"Last Name",onIonChange:function(e){return S(e.detail.value)}})}),Object(y.jsx)(o.c,{onClick:function(){return I.apply(this,arguments)},children:"Register"}),Object(y.jsx)(o.c,{class:"cancelbutton",routerLink:"/",children:"Cancel"})]})]})}),C=(n(101),function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),a=Object(b.a)(s,2),i=a[0],j=a[1];function l(){return(l=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(),localStorage.removeItem("token"),console.log("disconnected");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/cave/list");case 2:t=e.sent,console.log(t),r(t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/note/list");case 2:t=e.sent,console.log(t),j(t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.N)((function(){!function(){h.apply(this,arguments)}(),function(){O.apply(this,arguments)}()})),Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsx)(o.B,{children:Object(y.jsx)(o.A,{children:"You are logged in ! "})})}),Object(y.jsx)(o.k,{fullscreen:!0,children:Object(y.jsxs)(o.m,{children:[Object(y.jsx)(o.x,{style:{marginTop:Object(o.K)("ios")?20:0},children:Object(y.jsx)(o.j,{children:Object(y.jsxs)(o.A,{children:["My caves",Object(y.jsx)(o.v,{routerLink:"/createCave",children:Object(y.jsx)(o.h,{children:"Ajouter une cave"})})]})})}),Object(y.jsx)(o.x,{children:Object(y.jsx)(o.j,{children:n.map((function(e){return Object(y.jsx)(o.e,{routerLink:"/cave/"+e.id,children:Object(y.jsxs)("div",{style:{padding:15},children:[Object(y.jsxs)(o.h,{children:["(",e.bottles.length," bouteilles)"]}),Object(y.jsx)(o.i,{children:e.name})]})},e.id)}))})}),Object(y.jsx)(o.x,{children:Object(y.jsx)(o.j,{children:Object(y.jsxs)(o.A,{style:{marginBottom:10},children:["My notes",Object(y.jsx)(o.v,{routerLink:"/createNote",children:Object(y.jsx)(o.h,{children:"Ajouter une note"})})]})})}),Object(y.jsx)(o.x,{children:Object(y.jsx)(o.j,{children:i.map((function(e){return Object(y.jsxs)(o.e,{routerLink:"/note/".concat(e.id),children:[Object(y.jsx)("img",{src:e.picture,alt:""}),Object(y.jsxs)(o.g,{children:[Object(y.jsx)(o.h,{children:"Ma note"}),Object(y.jsx)(o.i,{children:e.name})]})]},e.id)}))})}),Object(y.jsx)(o.x,{children:Object(y.jsx)(o.j,{children:Object(y.jsx)(o.c,{onClick:function(){return l.apply(this,arguments)},routerLink:"/",children:"Logout"})})})]})})]})}),L=(n(41),function(){return Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsx)(o.B,{children:Object(y.jsx)(o.A,{children:"404 not found !"})})}),Object(y.jsx)(o.k,{fullscreen:!0,children:Object(y.jsx)(o.c,{routerLink:"/",children:"return to Home"})})]})}),S=(n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),function(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(i.e)(),a=Object(o.L)(),j=Object(b.a)(a,1)[0];function l(){return(l=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.post("/cave/create",{name:n});case 3:e.sent&&(s.push("/home"),console.log("cave created")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j({message:"There is one field missing",buttons:["ok"]});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsx)(o.B,{children:Object(y.jsx)(o.A,{children:"Add a new cave"})})}),Object(y.jsxs)(o.k,{fullscreen:!0,children:[Object(y.jsx)(o.p,{value:n,placeholder:"Cave name (*)",onIonChange:function(e){return r(e.detail.value)}}),Object(y.jsx)(o.c,{onClick:function(){return l.apply(this,arguments)},children:"Create cave"}),Object(y.jsx)(o.c,{routerLink:"/home",children:"Cancel"})]})]})}),_=n.p+"static/media/cave.ee69ee0b.jpg",B=function(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),a=Object(b.a)(s,2),j=a[0],l=a[1],h=Object(c.useState)(),O=Object(b.a)(h,2),p=O[0],f=O[1],m=Object(i.e)(),v=Object(o.L)(),g=Object(b.a)(v,1)[0];function k(){return(k=Object(d.a)(u.a.mark((function e(t){var n,c,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,c=t.target.files[0],n.append("picture",c),e.next=5,x.post("/note/picture",n,{headers:{"Content-Type":"multipart/form-data"}});case 5:r=e.sent,s=r.data,l(s.description),f(s.uri);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.post("/note",{name:n,note:j,picture:p,date:new Date});case 3:e.sent&&(m.push("/home"),console.log("note created")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g({message:"There is one field missing",buttons:["ok"]});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsxs)(o.B,{children:[Object(y.jsx)(o.d,{slot:"start",children:Object(y.jsx)(o.b,{defaultHref:"/home"})}),Object(y.jsx)(o.A,{children:"Add a new note"})]})}),Object(y.jsx)(o.k,{fullscreen:!0,children:Object(y.jsx)(o.m,{children:Object(y.jsxs)(o.e,{children:[Object(y.jsx)("img",{src:p||_,alt:"",style:{height:150,objectFit:"cover",width:"100%"}}),Object(y.jsxs)(o.g,{children:[Object(y.jsx)(o.p,{value:n,placeholder:"Note name (*)",onIonChange:function(e){return r(e.detail.value)}}),Object(y.jsx)(o.z,{value:j,rows:10,placeholder:"Insert my notes (*)",onIonChange:function(e){return l(e.detail.value)}}),Object(y.jsx)("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:function(e){return k.apply(this,arguments)}}),Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(y.jsx)(o.c,{size:"small",fill:"outline",expand:"block",onClick:function(){document.getElementById("file-upload").click()},children:"Camera"}),Object(y.jsx)(o.c,{size:"small",color:"primary",expand:"block",slot:"end",onClick:function(){return w.apply(this,arguments)},children:"Create note"})]})]})]})})})]})},A=function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.post("/users/recoverPassword");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsx)(o.B,{children:Object(y.jsx)(o.A,{children:" Recover my password"})})}),Object(y.jsxs)(o.k,{fullscreen:!0,children:[Object(y.jsx)(o.q,{children:Object(y.jsx)(o.p,{placeholder:"E-Mail"})}),Object(y.jsx)(o.c,{onClick:function(){return e.apply(this,arguments)},children:"Recover"}),Object(y.jsx)(o.c,{routerLink:"/",children:"Cancel"})]})]})},I=n(44),N=n(16),D=function(){var e=Object(i.f)().id,t=Object(c.useState)(),n=Object(b.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(),j=Object(b.a)(a,2),l=j[0],h=j[1],O=Object(o.M)(),p=Object(b.a)(O,2),f=p[0],m=p[1];function v(){return(v=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("/cave/"+e);case 2:n=t.sent,s(n.data),h(n.data.name);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.delete("/wine/cave/"+t);case 2:s((function(e){return Object(I.a)(Object(I.a)({},e),{},{bottles:e.bottles.filter((function(e){return e.id!==t}))})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.put("/cave/update",{name:l,id:e});case 2:f({buttons:[{text:"Ok",handler:function(){return m()}}],message:"Nom de la cave mis \xe0 jour",color:"success"});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){v.apply(this,arguments)}()}),[]),Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsxs)(o.B,{children:[Object(y.jsx)(o.d,{slot:"start",children:Object(y.jsx)(o.b,{defaultHref:"/home"})}),Object(y.jsx)(o.p,{style:{marginLeft:10},value:l,onIonChange:function(e){return h(e.detail.value)}}),Object(y.jsx)(o.d,{slot:"end",children:Object(y.jsx)(o.o,{onClick:function(){return k.apply(this,arguments)},icon:N.c,size:"large",style:{marginRight:10}})})]})}),Object(y.jsx)(o.k,{fullscreen:!0,children:Object(y.jsx)(o.m,{children:Object(y.jsx)(o.x,{children:Object(y.jsx)(o.j,{children:null===r||void 0===r?void 0:r.bottles.map((function(e){return Object(y.jsxs)(o.e,{children:[e.picture&&Object(y.jsx)("img",{alt:"bouteille",src:e.picture,style:{height:200,width:"100%",objectFit:"cover"}}),Object(y.jsx)(o.g,{children:Object(y.jsxs)(o.i,{children:["Name : ",e.name]})}),Object(y.jsxs)(o.f,{children:["Best before : ",e.best_before,Object(y.jsx)("br",{}),"Food combination : ",e.food,Object(y.jsx)("br",{}),"Grapes : ",e.grapes,Object(y.jsx)("br",{}),"Maker : ",e.maker,Object(y.jsx)("br",{}),"Year : ",e.year,Object(y.jsx)("br",{}),Object(y.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(y.jsx)(o.c,{onClick:function(){return function(e){return g.apply(this,arguments)}(e.id)},color:"danger",slot:"end",size:"small",children:Object(y.jsx)(o.o,{icon:N.o})})})]})]},e.name)}))})})})}),Object(y.jsx)(o.l,{children:Object(y.jsx)(o.B,{children:Object(y.jsx)(o.c,{expand:"block",routerLink:"/cave/add/"+e,children:"Add Wine"})})})]})},E=function(){var e=Object(i.f)().id,t=Object(c.useState)(null),n=Object(b.a)(t,2),r=n[0],s=n[1],a=Object(o.L)(),j=Object(b.a)(a,1)[0],l=Object(i.e)();function h(){return(h=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.delete("/note/".concat(e));case 2:j({header:"Note",message:"Note deleted!",buttons:[{text:"Ok",handler:l.goBack}],onDidDismiss:l.goBack});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(o.N)(Object(d.a)(u.a.mark((function t(){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("/note/".concat(e));case 2:n=t.sent,c=n.data,s(c);case 5:case"end":return t.stop()}}),t)})))),Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsxs)(o.B,{children:[Object(y.jsx)(o.d,{slot:"start",children:Object(y.jsx)(o.b,{defaultHref:"/home"})}),Object(y.jsx)(o.A,{children:(null===r||void 0===r?void 0:r.name)||"Note"})]})}),Object(y.jsx)(o.k,{fullscreen:!0,children:Object(y.jsxs)(o.e,{children:[Object(y.jsx)("img",{src:null===r||void 0===r?void 0:r.picture,alt:""}),Object(y.jsxs)(o.g,{children:[Object(y.jsxs)(o.h,{children:["Cr\xe9e le ",null===r||void 0===r?void 0:r.date]}),Object(y.jsx)(o.i,{children:null===r||void 0===r?void 0:r.name})]}),Object(y.jsxs)(o.f,{children:[null===r||void 0===r?void 0:r.note,Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[Object(y.jsx)(o.c,{size:"small",routerLink:"/note/edit/".concat(e),fill:"outline",children:"Edit"}),Object(y.jsx)(o.c,{size:"small",color:"danger",slot:"end",onClick:function(){return h.apply(this,arguments)},children:"Delete"})]})]})]})})]})},z=function(){var e=Object(i.f)().id,t=Object(c.useState)(),n=Object(b.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(),j=Object(b.a)(a,2),l=j[0],h=j[1],O=Object(c.useState)(),p=Object(b.a)(O,2),f=p[0],m=p[1],v=Object(c.useState)(null),g=Object(b.a)(v,2),k=g[0],w=g[1],C=Object(o.L)(),L=Object(b.a)(C,1)[0],S=Object(i.e)();function _(){return(_=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.put("/note/update",{id:e,name:r,picture:l,note:f});case 2:L({header:"Note",message:"Note updated!",buttons:[{text:"Ok",handler:S.goBack}],onDidDismiss:S.goBack});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(){return(B=Object(d.a)(u.a.mark((function e(t){var n,c,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,c=t.target.files[0],n.append("picture",c),e.next=5,x.post("/note/picture",n,{headers:{"Content-Type":"multipart/form-data"}});case 5:r=e.sent,s=r.data,m(s.description),h(s.uri);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.N)(Object(d.a)(u.a.mark((function t(){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("/note/".concat(e));case 2:n=t.sent,c=n.data,w(c),s(c.name),m(c.note),h(c.picture);case 8:case"end":return t.stop()}}),t)})))),Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.n,{children:Object(y.jsxs)(o.B,{children:[Object(y.jsx)(o.d,{slot:"start",children:Object(y.jsx)(o.b,{defaultHref:"/home"})}),Object(y.jsx)(o.A,{children:"Edit: "+(null===k||void 0===k?void 0:k.name)||!1})]})}),Object(y.jsx)(o.k,{fullscreen:!0,children:Object(y.jsxs)(o.e,{children:[Object(y.jsx)("img",{src:l,alt:""}),Object(y.jsxs)(o.g,{children:[Object(y.jsxs)(o.h,{children:["Cr\xe9e le ",null===k||void 0===k?void 0:k.date]}),Object(y.jsx)(o.i,{children:r})]}),Object(y.jsxs)(o.f,{children:[Object(y.jsxs)(o.q,{children:[Object(y.jsx)(o.s,{children:"Name"}),Object(y.jsx)(o.p,{value:r,placeholder:"Note name (*)",onIonChange:function(e){return s(e.detail.value)}})]}),Object(y.jsxs)(o.q,{children:[Object(y.jsx)(o.s,{children:"Description"}),Object(y.jsx)(o.z,{value:f,rows:10,placeholder:"Insert my notes (*)",onIonChange:function(e){return m(e.detail.value)}})]}),Object(y.jsx)("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:function(e){return B.apply(this,arguments)}}),Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[Object(y.jsx)(o.c,{size:"small",fill:"outline",expand:"block",onClick:function(){document.getElementById("file-upload").click()},children:"Camera"}),Object(y.jsx)(o.c,{size:"small",color:"primary",expand:"block",slot:"end",onClick:function(){return _.apply(this,arguments)},children:"Edit note"})]})]})]})})]})},F=n(36),T=function(){var e=Object(i.f)().id,t=Object(c.useState)(""),n=Object(b.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)([]),j=Object(b.a)(a,2),l=j[0],h=j[1],O=Object(c.useState)([]),p=Object(b.a)(O,2),f=p[0],m=p[1],v=Object(o.L)(),g=Object(b.a)(v,1)[0],k=Object(i.e)();function w(e){m((function(t){return t.filter((function(t){return t.id!==e.id}))}))}function C(e){return f.some((function(t){return t.id===e}))}function L(){return(L=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.post("/wine/cave/add",{wines:f.map((function(e){return e.id})),cave:e});case 2:g({header:"Wine",message:f.length+" vins ajout\xe9s!",buttons:[{text:"Ok",handler:k.goBack}],onDidDismiss:k.goBack});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){r.length>3&&x.post("/wines",{name:r}).then((function(e){var t=e.data;console.log(t),h(t)}))}),[r]),Object(y.jsxs)(o.t,{children:[Object(y.jsxs)(o.B,{children:[Object(y.jsx)(o.d,{slot:"start",children:Object(y.jsx)(o.b,{defaultHref:"/home"})}),Object(y.jsx)(o.A,{children:"Add wine(s) to this cave"})]}),Object(y.jsxs)(o.k,{fullscreen:!0,children:[Object(y.jsx)(o.y,{onIonChange:function(e){return s(e.detail.value)},onIonClear:function(){return h([])},debounce:200}),Object(y.jsx)(o.m,{children:Object(y.jsx)(o.x,{children:Object(y.jsx)(o.j,{children:f.map((function(e){return Object(y.jsxs)(o.c,{size:"small",onClick:function(){return w(e)},children:[Object(y.jsx)(o.o,{slot:"start",icon:N.g}),e.name.substring(0,20),"..."]},e.id)}))})})}),Object(y.jsxs)(o.m,{children:[Object(y.jsxs)(o.A,{children:[l.length," vins trouv\xe9s"]}),Object(y.jsx)(o.x,{children:Object(y.jsx)(o.j,{children:l.map((function(e){return Object(y.jsxs)(o.e,{color:C(e.id)?"success":void 0,onClick:function(){var t;C((t=e).id)?w(t):m((function(e){return[].concat(Object(F.a)(e),[t])}))},children:[e.picture&&Object(y.jsx)("div",{style:{background:"white"},children:Object(y.jsx)("img",{alt:"bouteille",src:e.picture,style:{height:250,width:"100%",objectFit:"cover"}})}),Object(y.jsx)(o.g,{children:Object(y.jsx)(o.i,{children:e.name})}),Object(y.jsxs)(o.f,{children:["Best before : ",e.best_before,Object(y.jsx)("br",{}),"Food combination : ",e.food,Object(y.jsx)("br",{}),"Grapes : ",e.grapes,Object(y.jsx)("br",{}),"Maker : ",e.maker,Object(y.jsx)("br",{}),"Year : ",e.year]})]},e.name)}))})})]})]}),f.length>0&&Object(y.jsx)(o.l,{className:"ion-no-border",children:Object(y.jsxs)(o.c,{expand:"block",onClick:function(){return L.apply(this,arguments)},style:{marginLeft:5,marginRight:5},children:["Ajouter ",f.length," vins"]})})]})},M=function(){return Object(y.jsx)(o.a,{children:Object(y.jsx)(j.a,{children:Object(y.jsx)(o.w,{children:Object(y.jsxs)(i.c,{children:[Object(y.jsx)(i.a,{exact:!0,path:"/",component:k}),Object(y.jsx)(i.a,{path:"/register",component:w}),Object(y.jsx)(i.a,{path:"/home",component:C}),Object(y.jsx)(i.a,{path:"/createCave",component:S}),Object(y.jsx)(i.a,{path:"/createNote",component:B}),Object(y.jsx)(i.a,{path:"/recover",component:A}),Object(y.jsx)(i.a,{exact:!0,path:"/cave/:id",component:D}),Object(y.jsx)(i.a,{exact:!0,path:"/cave/add/:id",component:T}),Object(y.jsx)(i.a,{exact:!0,path:"/note/:id",component:E}),Object(y.jsx)(i.a,{exact:!0,path:"/note/edit/:id",component:z}),Object(y.jsx)(i.a,{path:"*",component:L})]})})})})},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var P=function(e){e&&e instanceof Function&&n.e(58).then(n.bind(null,175)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(M,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):q(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):q(t,e)}))}}(),P()},41:function(e,t,n){},71:function(e,t,n){var c={"./ion-action-sheet.entry.js":[115,5],"./ion-alert.entry.js":[116,6],"./ion-app_8.entry.js":[117,7],"./ion-avatar_3.entry.js":[118,17],"./ion-back-button.entry.js":[119,18],"./ion-backdrop.entry.js":[120,43],"./ion-button_2.entry.js":[121,19],"./ion-card_5.entry.js":[122,20],"./ion-checkbox.entry.js":[123,21],"./ion-chip.entry.js":[124,22],"./ion-col_3.entry.js":[125,44],"./ion-datetime_3.entry.js":[126,10],"./ion-fab_3.entry.js":[127,23],"./ion-img.entry.js":[128,45],"./ion-infinite-scroll_2.entry.js":[129,46],"./ion-input.entry.js":[130,24],"./ion-item-option_3.entry.js":[131,25],"./ion-item_8.entry.js":[132,26],"./ion-loading.entry.js":[133,27],"./ion-menu_3.entry.js":[134,28],"./ion-modal.entry.js":[135,8],"./ion-nav_2.entry.js":[136,14],"./ion-popover.entry.js":[137,9],"./ion-progress-bar.entry.js":[138,29],"./ion-radio_2.entry.js":[139,30],"./ion-range.entry.js":[140,31],"./ion-refresher_2.entry.js":[141,11],"./ion-reorder_2.entry.js":[142,16],"./ion-ripple-effect.entry.js":[143,47],"./ion-route_4.entry.js":[144,32],"./ion-searchbar.entry.js":[145,33],"./ion-segment_2.entry.js":[146,34],"./ion-select_3.entry.js":[147,35],"./ion-slide_2.entry.js":[148,48],"./ion-spinner.entry.js":[149,13],"./ion-split-pane.entry.js":[150,49],"./ion-tab-bar_2.entry.js":[151,36],"./ion-tab_2.entry.js":[152,15],"./ion-text.entry.js":[153,37],"./ion-textarea.entry.js":[154,38],"./ion-toast.entry.js":[155,39],"./ion-toggle.entry.js":[156,12],"./ion-virtual-scroll.entry.js":[157,50]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=71,e.exports=r},73:function(e,t,n){var c={"./ion-icon.entry.js":[158,57]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=73,e.exports=r},81:function(e,t,n){}},[[113,3,4]]]);
//# sourceMappingURL=main.baacf822.chunk.js.map